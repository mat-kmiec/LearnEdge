<!DOCTYPE html>
<html lang="pl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LearnEdge – Panel Administratora</title>

    <!-- Bootstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
      rel="stylesheet"
    />

    <!-- Główny styl -->
    <link
      th:href="@{/css/pages/dashboard.css}"
      href="../../static/css/pages/dashboard.css"
      rel="stylesheet"
    />

  </head>

  <body>
    <!-- Navbar -->
    <nav th:replace="~{fragments/nav :: navbar}"></nav>

    <div class="container py-5">
      <div class="dashboard-container">
        <div class="dashboard-header text-center mb-4">
          <h1 class="mb-2">Panel Administratora</h1>
          <p class="text-light opacity-75 small mb-0">
            Zarządzaj użytkownikami, kursami i monitoruj aktywność platformy.
          </p>
        </div>

        <!-- Statystyki -->
        <div class="row g-4 mb-5">
          <div class="col-md-4">
            <div class="stats-card">
              <div class="stats-icon"><i class="bi bi-people"></i></div>
              <h5>Użytkownicy</h5>
              <h3>128</h3>
            </div>
          </div>
          <div class="col-md-4">
            <div class="stats-card">
              <div class="stats-icon"><i class="bi bi-journal-bookmark"></i></div>
              <h5>Kursy</h5>
              <h3>42</h3>
            </div>
          </div>
          <div class="col-md-4">
            <div class="stats-card">
              <div class="stats-icon"><i class="bi bi-activity"></i></div>
              <h5>Aktywni uczniowie</h5>
              <h3>86</h3>
            </div>
          </div>
        </div>

        <!-- Sekcja użytkowników -->
        <div class="admin-section">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h5><i class="bi bi-person-lines-fill me-2"></i> Użytkownicy</h5>
    <button class="btn btn-gradient btn-sm">
      <i class="bi bi-person-plus me-2"></i> Dodaj użytkownika
    </button>
  </div>

  <ul class="user-list mb-0">
    <li class="d-flex justify-content-between align-items-start flex-wrap">
      <div class="me-3">
        <span class="fw-bold">👨‍💻 Jan Kowalski</span>
        <p class="small text-light opacity-75 mb-1">
          jan.kowalski@example.com
        </p>
        <span class="badge badge-style-visual">👁️ Wzrokowiec</span>
        <span class="small opacity-75 ms-2">• Rola: Administrator</span>
      </div>
      <div class="d-flex gap-2 mt-2 mt-sm-0">
        <button class="btn btn-sm btn-edit btn-action" data-bs-toggle="modal" data-bs-target="#editUserModal">
          <i class="bi bi-pencil"></i>
        </button>
        <button class="btn btn-sm btn-delete btn-action">
          <i class="bi bi-trash"></i>
        </button>
      </div>
    </li>

    <li class="d-flex justify-content-between align-items-start flex-wrap">
      <div class="me-3">
        <span class="fw-bold">👩‍🎓 Alicja Nowak</span>
        <p class="small text-light opacity-75 mb-1">
          alicja.nowak@example.co   m
        </p>
        <span class="badge badge-style-auditory">🎧 Słuchowiec</span>
        <span class="small opacity-75 ms-2">• Rola: Użytkownik</span>
      </div>
      <div class="d-flex gap-2 mt-2 mt-sm-0">
        <button class="btn btn-sm btn-edit btn-action" data-bs-toggle="modal" data-bs-target="#editUserModal">
          <i class="bi bi-pencil"></i>
        </button>
        <button class="btn btn-sm btn-delete btn-action">
          <i class="bi bi-trash"></i>
        </button>
      </div>
    </li>
  </ul>
</div>
<!-- Sekcja kursów w stylu listy -->
<div class="admin-section">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h5><i class="bi bi-journal-bookmark me-2"></i> Kursy</h5>
    <button class="btn btn-gradient btn-sm">
      <i class="bi bi-plus-circle me-2"></i> Dodaj kurs
    </button>
  </div>

  <ul class="course-list mb-0">
    <li class="d-flex justify-content-between align-items-start flex-wrap">
      <div class="me-3">
        <span class="fw-bold">🎧 Programowanie w Javie</span>
        <p class="small text-light opacity-75 mb-1">
          Zrozum podstawy języka Java i naucz się budować aplikacje krok po kroku.
        </p>
        <span class="badge badge-style-auditory">Słuchowiec</span>
        <span class="small opacity-75 ms-2">• Poziom: Średni</span>
      </div>
      <div class="d-flex gap-2 mt-2 mt-sm-0">
        <button class="btn btn-sm btn-edit btn-action">
          <i class="bi bi-pencil"></i>
        </button>
        <button class="btn btn-sm btn-delete btn-action">
          <i class="bi bi-trash"></i>
        </button>
      </div>
    </li>

    <li class="d-flex justify-content-between align-items-start flex-wrap">
      <div class="me-3">
        <span class="fw-bold">👁️ UX Design w praktyce</span>
        <p class="small text-light opacity-75 mb-1">
          Naucz się projektować interfejsy dopasowane do percepcji wzrokowej.
        </p>
        <span class="badge badge-style-visual">Wzrokowiec</span>
        <span class="small opacity-75 ms-2">• Poziom: Łatwy</span>
      </div>
      <div class="d-flex gap-2 mt-2 mt-sm-0">
        <button class="btn btn-sm btn-edit btn-action">
          <i class="bi bi-pencil"></i>
        </button>
        <button class="btn btn-sm btn-delete btn-action">
          <i class="bi bi-trash"></i>
        </button>
      </div>
    </li>

    <li class="d-flex justify-content-between align-items-start flex-wrap">
      <div class="me-3">
        <span class="fw-bold">✋ Efektywne uczenie się</span>
        <p class="small text-light opacity-75 mb-1">
          Odkryj techniki dopasowane do stylu kinestetycznego i ucz się przez doświadczenie.
        </p>
        <span class="badge badge-style-kinesthetic">Kinestetyk</span>
        <span class="small opacity-75 ms-2">• Poziom: Zaawansowany</span>
      </div>
      <div class="d-flex gap-2 mt-2 mt-sm-0">
        <button class="btn btn-sm btn-edit btn-action">
          <i class="bi bi-pencil"></i>
        </button>
        <button class="btn btn-sm btn-delete btn-action">
          <i class="bi bi-trash"></i>
        </button>
      </div>
    </li>
  </ul>
</div>



        <!-- Sekcja logów lub aktywności -->
        <div class="admin-section">
          <h5><i class="bi bi-clipboard-data me-2"></i> Ostatnie aktywności</h5>
          <ul class="text-light small mb-0">
            <li>📘 Dodano nowy kurs: <strong>Efektywne uczenie się</strong></li>
            <li>👤 Użytkownik <strong>Jan Kowalski</strong> zmienił styl na <em>Kinestetyk</em></li>
            <li>🗑️ Usunięto kurs: <strong>Podstawy HTML</strong></li>
          </ul>
        </div>
      </div>
    </div>

   <!-- === MODAL: Edycja użytkownika (ulepszony) === -->
<div class="modal fade" id="editUserModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content bg-transparent border-0">
      <div class="dashboard-container p-4">
        <!-- Nagłówek -->
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h5 class="mb-0 text-white d-flex align-items-center">
            <i class="bi bi-person-gear me-2 text-accent"></i> Edytuj użytkownika
          </h5>
          <button
            type="button"
            class="btn-close btn-close-white"
            data-bs-dismiss="modal"
          ></button>
        </div>

        <!-- Formularz -->
        <form id="editUserForm">
          <div class="row g-3">
            <div class="col-md-6">
              <label class="form-label text-light small">Imię i nazwisko</label>
              <input
                type="text"
                class="form-control text-white"
                id="userName"
                placeholder="Jan Kowalski"
              />
            </div>

            <div class="col-md-6">
              <label class="form-label text-light small">Adres e-mail</label>
              <input
                type="email"
                class="form-control text-white"
                id="userEmail"
                placeholder="jan.kowalski@example.com"
              />
            </div>

            <div class="col-md-12">
              <label class="form-label text-light small">Styl uczenia się</label>
              <select
                id="userStyle"
                class="form-select custom-select-learnedge"
              >
                <option value="VISUAL">👁️ Wzrokowiec</option>
                <option value="AUDITORY">🎧 Słuchowiec</option>
                <option value="KINESTHETIC">✋ Kinestetyk</option>
              </select>
            </div>

            <div class="col-md-12">
              <label class="form-label text-light small">Rola użytkownika</label>
              <select
                id="userRole"
                class="form-select custom-select-learnedge"
              >
                <option value="USER">Użytkownik</option>
                <option value="MODERATOR">Moderator</option>
                <option value="ADMIN">Administrator</option>
              </select>
            </div>
          </div>

          <!-- Przyciski -->
          <div class="d-flex justify-content-end gap-2 mt-4">
            <button
              type="button"
              class="btn btn-outline-primary"
              data-bs-dismiss="modal"
            >
              Anuluj
            </button>
            <button type="submit" class="btn btn-gradient">
              <i class="bi bi-save2 me-2"></i>Zapisz zmiany
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>



<script>
  // Obsługa otwarcia modali z tabeli
  document.querySelectorAll('.btn-edit').forEach((btn) => {
    btn.addEventListener('click', (e) => {
      const row = e.target.closest('tr');
      const isUser = row.closest('table').querySelector('th').innerText === 'ID';

      if (row && isUser) {
        const modal = new bootstrap.Modal('#editUserModal');
        modal.show();
      } else {
        const modal = new bootstrap.Modal('#editCourseModal');
        modal.show();
      }
    });
  });

  // Przykład obsługi wysłania formularza
  document
    .getElementById('editUserForm')
    .addEventListener('submit', (e) => {
      e.preventDefault();
      // TODO: fetch PUT /api/users/{id}
      alert('✅ Zapisano zmiany użytkownika');
      bootstrap.Modal.getInstance(document.getElementById('editUserModal')).hide();
    });

  document
    .getElementById('editCourseForm')
    .addEventListener('submit', (e) => {
      e.preventDefault();
      // TODO: fetch PUT /api/courses/{id}
      alert('✅ Zapisano zmiany kursu');
      bootstrap.Modal.getInstance(document.getElementById('editCourseModal')).hide();
    });
</script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
